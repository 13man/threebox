import router from '@ohos.router';
import promptAction from '@ohos.promptAction';

// è¯—è¯é¢˜ç›®æ¥å£
interface InkQuestion {
  id: number;
  poem: string;
  author: string;
  blankIndex: number;
  correctAnswer: string;
  options: string[];
}

// å¢¨æ»´ç²’å­æ¥å£
interface InkParticle {
  id: number;
  x: number;
  y: number;
  velocityX: number;
  velocityY: number;
  opacity: number;
  size: number;
}

// 100é“é¢˜åº“
const INK_QUESTIONS: InkQuestion[] = [
  { id: 1, poem: 'åºŠå‰æ˜æœˆå…‰ï¼Œç–‘æ˜¯åœ°ä¸Šéœœ', author: 'æç™½', blankIndex: 4, correctAnswer: 'å…‰', options: ['å…‰', 'å¹¿', 'åº†', 'åºŠ'] },
  { id: 2, poem: 'æ˜¥çœ ä¸è§‰æ™“ï¼Œå¤„å¤„é—»å•¼é¸Ÿ', author: 'å­Ÿæµ©ç„¶', blankIndex: 9, correctAnswer: 'å•¼', options: ['å•¼', 'è¹„', 'è°›', 'ç¼”'] },
  { id: 3, poem: 'æ—¥ç…§é¦™ç‚‰ç”Ÿç´«çƒŸ', author: 'æç™½', blankIndex: 5, correctAnswer: 'ç´«', options: ['ç´«', 'ç´«', 'æŸ´', 'ç´Š'] },
  { id: 4, poem: 'é£æµç›´ä¸‹ä¸‰åƒå°º', author: 'æç™½', blankIndex: 6, correctAnswer: 'åƒ', options: ['åƒ', 'å¹²', 'äº', 'å£«'] },
  { id: 5, poem: 'ä¸¤å²¸çŒ¿å£°å•¼ä¸ä½', author: 'æç™½', blankIndex: 5, correctAnswer: 'ä¸', options: ['ä¸', 'æœ¨', 'æœ¬', 'æœª'] },
  { id: 6, poem: 'è½»èˆŸå·²è¿‡ä¸‡é‡å±±', author: 'æç™½', blankIndex: 4, correctAnswer: 'ä¸‡', options: ['ä¸‡', 'æ–¹', 'ä¸º', 'åŠ›'] },
  { id: 7, poem: 'å­¤å¸†è¿œå½±ç¢§ç©ºå°½', author: 'æç™½', blankIndex: 4, correctAnswer: 'ç¢§', options: ['ç¢§', 'ç’§', 'å£', 'è‡‚'] },
  { id: 8, poem: 'å”¯è§é•¿æ±Ÿå¤©é™…æµ', author: 'æç™½', blankIndex: 2, correctAnswer: 'é•¿', options: ['é•¿', 'é•¿', 'å¸¸', 'å¼ '] },
  { id: 9, poem: 'ç™½æ—¥ä¾å±±å°½ï¼Œé»„æ²³å…¥æµ·æµ', author: 'ç‹ä¹‹æ¶£', blankIndex: 9, correctAnswer: 'æµ·', options: ['æµ·', 'è¯²', 'æ‚”', 'ä¾®'] },
  { id: 10, poem: 'æ¬²ç©·åƒé‡Œç›®ï¼Œæ›´ä¸Šä¸€å±‚æ¥¼', author: 'ç‹ä¹‹æ¶£', blankIndex: 10, correctAnswer: 'å±‚', options: ['å±‚', 'å±‹', 'å±…', 'å°º'] },
  { id: 11, poem: 'ä¸¾å¤´æœ›æ˜æœˆï¼Œä½å¤´æ€æ•…ä¹¡', author: 'æç™½', blankIndex: 9, correctAnswer: 'æ•…', options: ['æ•…', 'å›º', 'å¤', 'è‹¦'] },
  { id: 12, poem: 'æ˜¥ç§ä¸€ç²’ç²Ÿï¼Œç§‹æ”¶ä¸‡é¢—å­', author: 'æç»…', blankIndex: 7, correctAnswer: 'ä¸‡', options: ['ä¸‡', 'æ–¹', 'åŠ›', 'åˆ€'] },
  { id: 13, poem: 'è°çŸ¥ç›˜ä¸­é¤ï¼Œç²’ç²’çš†è¾›è‹¦', author: 'æç»…', blankIndex: 7, correctAnswer: 'è¾›', options: ['è¾›', 'å¹¸', 'è¾', 'æ–°'] },
  { id: 14, poem: 'é‡ç«çƒ§ä¸å°½ï¼Œæ˜¥é£å¹åˆç”Ÿ', author: 'ç™½å±…æ˜“', blankIndex: 9, correctAnswer: 'ç”Ÿ', options: ['ç”Ÿ', 'ç‰›', 'æ€§', 'æ˜Ÿ'] },
  { id: 15, poem: 'è¿œèŠ³ä¾µå¤é“ï¼Œæ™´ç¿ æ¥è’åŸ', author: 'ç™½å±…æ˜“', blankIndex: 6, correctAnswer: 'ç¿ ', options: ['ç¿ ', 'ç¢', 'è„†', 'ç²¹'] },
  { id: 16, poem: 'çº¢è±†ç”Ÿå—å›½ï¼Œæ˜¥æ¥å‘å‡ æ', author: 'ç‹ç»´', blankIndex: 7, correctAnswer: 'å‡ ', options: ['å‡ ', 'å„¿', 'å‡¡', 'é£'] },
  { id: 17, poem: 'åŠå›æ›´å°½ä¸€æ¯é…’', author: 'ç‹ç»´', blankIndex: 5, correctAnswer: 'ä¸€', options: ['ä¸€', 'äºŒ', 'ä¸‰', 'ä¸'] },
  { id: 18, poem: 'è¥¿å‡ºé˜³å…³æ— æ•…äºº', author: 'ç‹ç»´', blankIndex: 4, correctAnswer: 'æ— ', options: ['æ— ', 'å¤©', 'å…ƒ', 'äº”'] },
  { id: 19, poem: 'ç‹¬åœ¨å¼‚ä¹¡ä¸ºå¼‚å®¢', author: 'ç‹ç»´', blankIndex: 5, correctAnswer: 'å¼‚', options: ['å¼‚', 'å¯¼', 'å¯¼', 'ç•Œ'] },
  { id: 20, poem: 'æ¯é€¢ä½³èŠ‚å€æ€äº²', author: 'ç‹ç»´', blankIndex: 4, correctAnswer: 'å€', options: ['å€', 'åŸ¹', 'é™ª', 'èµ”'] },
  { id: 21, poem: 'æ¡ƒèŠ±æ½­æ°´æ·±åƒå°º', author: 'æç™½', blankIndex: 4, correctAnswer: 'æ·±', options: ['æ·±', 'æ¢', 'ç›', 'æ£•'] },
  { id: 22, poem: 'ä¸åŠæ±ªä¼¦é€æˆ‘æƒ…', author: 'æç™½', blankIndex: 5, correctAnswer: 'æˆ‘', options: ['æˆ‘', 'æ‰¾', 'æˆˆ', 'æˆ'] },
  { id: 23, poem: 'æœè¾ç™½å¸å½©äº‘é—´', author: 'æç™½', blankIndex: 4, correctAnswer: 'å½©', options: ['å½©', 'å½±', 'å½°', 'é¡»'] },
  { id: 24, poem: 'åƒé‡Œæ±Ÿé™µä¸€æ—¥è¿˜', author: 'æç™½', blankIndex: 5, correctAnswer: 'ä¸€', options: ['ä¸€', 'äºŒ', 'ä¸', 'å¹²'] },
  { id: 25, poem: 'æ˜¥é£åˆç»¿æ±Ÿå—å²¸', author: 'ç‹å®‰çŸ³', blankIndex: 3, correctAnswer: 'ç»¿', options: ['ç»¿', 'å½•', 'æ¸Œ', 'ç»¿'] },
  { id: 26, poem: 'æ˜æœˆä½•æ—¶ç…§æˆ‘è¿˜', author: 'ç‹å®‰çŸ³', blankIndex: 5, correctAnswer: 'æˆ‘', options: ['æˆ‘', 'æ‰¾', 'æˆ–', 'æˆˆ'] },
  { id: 27, poem: 'æœˆè½ä¹Œå•¼éœœæ»¡å¤©', author: 'å¼ ç»§', blankIndex: 4, correctAnswer: 'éœœ', options: ['éœœ', 'éœ¸', 'é›ª', 'éœ²'] },
  { id: 28, poem: 'æ±Ÿæ«æ¸”ç«å¯¹æ„çœ ', author: 'å¼ ç»§', blankIndex: 4, correctAnswer: 'æ„', options: ['æ„', 'ç§‹', 'é³…', 'æª'] },
  { id: 29, poem: 'å§‘è‹åŸå¤–å¯’å±±å¯º', author: 'å¼ ç»§', blankIndex: 4, correctAnswer: 'å¯’', options: ['å¯’', 'å¡', 'å®³', 'å®´'] },
  { id: 30, poem: 'å¤œåŠé’Ÿå£°åˆ°å®¢èˆ¹', author: 'å¼ ç»§', blankIndex: 5, correctAnswer: 'å®¢', options: ['å®¢', 'å®¹', 'å®«', 'å®¿'] },
  { id: 31, poem: 'æ´›é˜³äº²å‹å¦‚ç›¸é—®', author: 'ç‹æ˜Œé¾„', blankIndex: 4, correctAnswer: 'å¦‚', options: ['å¦‚', 'å¥½', 'å¦‡', 'çŸ¥'] },
  { id: 32, poem: 'ä¸€ç‰‡å†°å¿ƒåœ¨ç‰å£¶', author: 'ç‹æ˜Œé¾„', blankIndex: 3, correctAnswer: 'å†°', options: ['å†°', 'æ°´', 'æ°¸', 'å†·'] },
  { id: 33, poem: 'ç§¦æ—¶æ˜æœˆæ±‰æ—¶å…³', author: 'ç‹æ˜Œé¾„', blankIndex: 5, correctAnswer: 'æ±‰', options: ['æ±‰', 'æ±—', 'æ—±', 'æ±‰'] },
  { id: 34, poem: 'ä¸‡é‡Œé•¿å¾äººæœªè¿˜', author: 'ç‹æ˜Œé¾„', blankIndex: 5, correctAnswer: 'äºº', options: ['äºº', 'å…¥', 'å¤§', 'å¤©'] },
  { id: 35, poem: 'é»„æ²³è¿œä¸Šç™½äº‘é—´', author: 'ç‹ä¹‹æ¶£', blankIndex: 4, correctAnswer: 'ç™½', options: ['ç™½', 'ç™¾', 'æŸ', 'ä¼¯'] },
  { id: 36, poem: 'ä¸€ç‰‡å­¤åŸä¸‡ä»å±±', author: 'ç‹ä¹‹æ¶£', blankIndex: 4, correctAnswer: 'ä¸‡', options: ['ä¸‡', 'æ–¹', 'åŠ›', 'åˆƒ'] },
  { id: 37, poem: 'ç¾Œç¬›ä½•é¡»æ€¨æ¨æŸ³', author: 'ç‹ä¹‹æ¶£', blankIndex: 4, correctAnswer: 'æ€¨', options: ['æ€¨', 'æ€’', 'æ•', 'æ€'] },
  { id: 38, poem: 'æ˜¥é£ä¸åº¦ç‰é—¨å…³', author: 'ç‹ä¹‹æ¶£', blankIndex: 3, correctAnswer: 'åº¦', options: ['åº¦', 'å¸­', 'åº­', 'åºŸ'] },
  { id: 39, poem: 'è‘¡è„ç¾é…’å¤œå…‰æ¯', author: 'ç‹ç¿°', blankIndex: 4, correctAnswer: 'å¤œ', options: ['å¤œ', 'æ¶²', 'å¤•', 'å¤š'] },
  { id: 40, poem: 'æ¬²é¥®çµç¶é©¬ä¸Šå‚¬', author: 'ç‹ç¿°', blankIndex: 4, correctAnswer: 'é©¬', options: ['é©¬', 'ç ', 'å¦ˆ', 'èš‚'] },
  { id: 41, poem: 'é†‰å§æ²™åœºå›è«ç¬‘', author: 'ç‹ç¿°', blankIndex: 4, correctAnswer: 'å›', options: ['å›', 'ç¾¤', 'éƒ¡', 'è£™'] },
  { id: 42, poem: 'å¤æ¥å¾æˆ˜å‡ äººå›', author: 'ç‹ç¿°', blankIndex: 4, correctAnswer: 'å‡ ', options: ['å‡ ', 'å‡¡', 'å„¿', 'é£'] },
  { id: 43, poem: 'å•†å¥³ä¸çŸ¥äº¡å›½æ¨', author: 'æœç‰§', blankIndex: 3, correctAnswer: 'çŸ¥', options: ['çŸ¥', 'çŸ¢', 'æ™º', 'å’Œ'] },
  { id: 44, poem: 'éš”æ±ŸçŠ¹å”±ååº­èŠ±', author: 'æœç‰§', blankIndex: 3, correctAnswer: 'å”±', options: ['å”±', 'æ™¶', 'å§', 'å–'] },
  { id: 45, poem: 'ä¸œé£ä¸ä¸å‘¨éƒä¾¿', author: 'æœç‰§', blankIndex: 3, correctAnswer: 'ä¸', options: ['ä¸', 'å†™', 'å…´', 'å…µ'] },
  { id: 46, poem: 'é“œé›€æ˜¥æ·±é”äºŒä¹”', author: 'æœç‰§', blankIndex: 3, correctAnswer: 'æ·±', options: ['æ·±', 'æ¢', 'ç›', 'æ£•'] },
  { id: 47, poem: 'åœè½¦åçˆ±æ«æ—æ™š', author: 'æœç‰§', blankIndex: 3, correctAnswer: 'çˆ±', options: ['çˆ±', 'å—', 'çˆ°', 'æ›¼'] },
  { id: 48, poem: 'éœœå¶çº¢äºäºŒæœˆèŠ±', author: 'æœç‰§', blankIndex: 3, correctAnswer: 'äº', options: ['äº', 'å¹²', 'åƒ', 'å­'] },
  { id: 49, poem: 'æ¸…æ˜æ—¶èŠ‚é›¨çº·çº·', author: 'æœç‰§', blankIndex: 4, correctAnswer: 'çº·', options: ['çº·', 'åˆ†', 'èŠ¬', 'ç²‰'] },
  { id: 50, poem: 'è·¯ä¸Šè¡Œäººæ¬²æ–­é­‚', author: 'æœç‰§', blankIndex: 4, correctAnswer: 'æ–­', options: ['æ–­', 'ç»§', 'æ–°', 'æŠ˜'] },
  { id: 51, poem: 'å€Ÿé—®é…’å®¶ä½•å¤„æœ‰', author: 'æœç‰§', blankIndex: 3, correctAnswer: 'å®¶', options: ['å®¶', 'å†¢', 'å®¾', 'å®…'] },
  { id: 52, poem: 'ç‰§ç«¥é¥æŒ‡æèŠ±æ‘', author: 'æœç‰§', blankIndex: 4, correctAnswer: 'æ', options: ['æ', 'å‘†', 'æŸ', 'å›°'] },
  { id: 53, poem: 'åƒå±±é¸Ÿé£ç»', author: 'æŸ³å®—å…ƒ', blankIndex: 3, correctAnswer: 'ç»', options: ['ç»', 'ç»', 'çº¸', 'ç´™'] },
  { id: 54, poem: 'ä¸‡å¾„äººè¸ªç­', author: 'æŸ³å®—å…ƒ', blankIndex: 3, correctAnswer: 'è¸ª', options: ['è¸ª', 'ç»¼', 'è¸ª', 'ç»¼'] },
  { id: 55, poem: 'å­¤èˆŸè“‘ç¬ ç¿', author: 'æŸ³å®—å…ƒ', blankIndex: 3, correctAnswer: 'ç¬ ', options: ['ç¬ ', 'è‹•', 'èŠ´', 'ç¬'] },
  { id: 56, poem: 'ç‹¬é’“å¯’æ±Ÿé›ª', author: 'æŸ³å®—å…ƒ', blankIndex: 2, correctAnswer: 'é’“', options: ['é’“', 'é’©', 'é’§', 'é’®'] },
  { id: 57, poem: 'å¤©è¡—å°é›¨æ¶¦å¦‚é…¥', author: 'éŸ©æ„ˆ', blankIndex: 4, correctAnswer: 'æ¶¦', options: ['æ¶¦', 'é—°', 'é…’', 'é—´'] },
  { id: 58, poem: 'è‰è‰²é¥çœ‹è¿‘å´æ— ', author: 'éŸ©æ„ˆ', blankIndex: 5, correctAnswer: 'å´', options: ['å´', 'è„š', 'éƒ½', 'è„š'] },
  { id: 59, poem: 'æœ€æ˜¯ä¸€å¹´æ˜¥å¥½å¤„', author: 'éŸ©æ„ˆ', blankIndex: 4, correctAnswer: 'æ˜¥', options: ['æ˜¥', 'èˆ‚', 'æ¤¿', 'è ¢'] },
  { id: 60, poem: 'ç»èƒœçƒŸæŸ³æ»¡çš‡éƒ½', author: 'éŸ©æ„ˆ', blankIndex: 3, correctAnswer: 'æŸ³', options: ['æŸ³', 'æŠ‘', 'å¸', 'å¾¡'] },
  { id: 61, poem: 'é»‘äº‘ç¿»å¢¨æœªé®å±±', author: 'è‹è½¼', blankIndex: 4, correctAnswer: 'é®', options: ['é®', 'è”—', 'åº¶', 'é®'] },
  { id: 62, poem: 'ç™½é›¨è·³ç ä¹±å…¥èˆ¹', author: 'è‹è½¼', blankIndex: 4, correctAnswer: 'ä¹±', options: ['ä¹±', 'èˆŒ', 'å­”', 'ä¹³'] },
  { id: 63, poem: 'å·åœ°é£æ¥å¿½å¹æ•£', author: 'è‹è½¼', blankIndex: 4, correctAnswer: 'å¹', options: ['å¹', 'æ¬¢', 'ç‚Š', 'æ¬¡'] },
  { id: 64, poem: 'æœ›æ¹–æ¥¼ä¸‹æ°´å¦‚å¤©', author: 'è‹è½¼', blankIndex: 4, correctAnswer: 'å¦‚', options: ['å¦‚', 'å¥½', 'å¦‡', 'å¦¥'] },
  { id: 65, poem: 'æ°´å…‰æ½‹æ»Ÿæ™´æ–¹å¥½', author: 'è‹è½¼', blankIndex: 5, correctAnswer: 'æ–¹', options: ['æ–¹', 'ä¸‡', 'åŠ›', 'èŠ³'] },
  { id: 66, poem: 'å±±è‰²ç©ºæ¿›é›¨äº¦å¥‡', author: 'è‹è½¼', blankIndex: 5, correctAnswer: 'äº¦', options: ['äº¦', 'èµ¤', 'å˜', 'å¤œ'] },
  { id: 67, poem: 'æ¬²æŠŠè¥¿æ¹–æ¯”è¥¿å­', author: 'è‹è½¼', blankIndex: 4, correctAnswer: 'æ¯”', options: ['æ¯”', 'åŒ—', 'æ­¤', 'æ‰¹'] },
  { id: 68, poem: 'æ·¡å¦†æµ“æŠ¹æ€»ç›¸å®œ', author: 'è‹è½¼', blankIndex: 4, correctAnswer: 'æ€»', options: ['æ€»', 'æ¯', 'æ¿', 'æ€¨'] },
  { id: 69, poem: 'æ¨ªçœ‹æˆå²­ä¾§æˆå³°', author: 'è‹è½¼', blankIndex: 4, correctAnswer: 'ä¾§', options: ['ä¾§', 'æµ‹', 'åˆ™', 'åˆ»'] },
  { id: 70, poem: 'è¿œè¿‘é«˜ä½å„ä¸åŒ', author: 'è‹è½¼', blankIndex: 4, correctAnswer: 'å„', options: ['å„', 'å', 'åˆ', 'å®¢'] },
  { id: 71, poem: 'ä¸è¯†åºå±±çœŸé¢ç›®', author: 'è‹è½¼', blankIndex: 4, correctAnswer: 'çœŸ', options: ['çœŸ', 'ç›´', 'å…·', 'é¢ '] },
  { id: 72, poem: 'åªç¼˜èº«åœ¨æ­¤å±±ä¸­', author: 'è‹è½¼', blankIndex: 4, correctAnswer: 'æ­¤', options: ['æ­¤', 'äº›', 'æ¯”', 'ç´«'] },
  { id: 73, poem: 'ç«¹å¤–æ¡ƒèŠ±ä¸‰ä¸¤æ', author: 'è‹è½¼', blankIndex: 4, correctAnswer: 'ä¸‰', options: ['ä¸‰', 'äºŒ', 'ç‹', 'å·'] },
  { id: 74, poem: 'æ˜¥æ±Ÿæ°´æš–é¸­å…ˆçŸ¥', author: 'è‹è½¼', blankIndex: 4, correctAnswer: 'æš–', options: ['æš–', 'æ´', 'çˆ°', 'ç¼“'] },
  { id: 75, poem: 'è’Œè’¿æ»¡åœ°èŠ¦èŠ½çŸ­', author: 'è‹è½¼', blankIndex: 4, correctAnswer: 'èŠ¦', options: ['èŠ¦', 'èŠ­', 'è‹', 'å¢'] },
  { id: 76, poem: 'æ­£æ˜¯æ²³è±šæ¬²ä¸Šæ—¶', author: 'è‹è½¼', blankIndex: 4, correctAnswer: 'æ¬²', options: ['æ¬²', 'è°·', 'æµ´', 'ä¿—'] },
  { id: 77, poem: 'æ¢…å­é‡‘é»„æå­è‚¥', author: 'èŒƒæˆå¤§', blankIndex: 4, correctAnswer: 'æ', options: ['æ', 'å‘†', 'æŸ', 'æŸ¥'] },
  { id: 78, poem: 'éº¦èŠ±é›ªç™½èœèŠ±ç¨€', author: 'èŒƒæˆå¤§', blankIndex: 4, correctAnswer: 'èœ', options: ['èœ', 'é‡‡', 'å½©', 'ç¬'] },
  { id: 79, poem: 'æ—¥é•¿ç¯±è½æ— äººè¿‡', author: 'èŒƒæˆå¤§', blankIndex: 4, correctAnswer: 'æ— ', options: ['æ— ', 'å¤©', 'å…ƒ', 'äº”'] },
  { id: 80, poem: 'æƒŸæœ‰èœ»èœ“è›±è¶é£', author: 'èŒƒæˆå¤§', blankIndex: 2, correctAnswer: 'æœ‰', options: ['æœ‰', 'å‹', 'å³', 'è‚´'] },
  { id: 81, poem: 'å„¿ç«¥æ•£å­¦å½’æ¥æ—©', author: 'é«˜é¼', blankIndex: 4, correctAnswer: 'æ¥', options: ['æ¥', 'æœ¨', 'æœª', 'ç±³'] },
  { id: 82, poem: 'å¿™è¶ä¸œé£æ”¾çº¸é¸¢', author: 'é«˜é¼', blankIndex: 5, correctAnswer: 'çº¸', options: ['çº¸', 'ä½', 'æ°', 'çº¸'] },
  { id: 83, poem: 'ç¯±è½ç–ç–ä¸€å¾„æ·±', author: 'æ¨ä¸‡é‡Œ', blankIndex: 4, correctAnswer: 'ä¸€', options: ['ä¸€', 'äºŒ', 'ä¸', 'å'] },
  { id: 84, poem: 'æ ‘å¤´èŠ±è½æœªæˆé˜´', author: 'æ¨ä¸‡é‡Œ', blankIndex: 4, correctAnswer: 'æœª', options: ['æœª', 'æœ«', 'æœ±', 'æ¥'] },
  { id: 85, poem: 'å„¿ç«¥æ€¥èµ°è¿½é»„è¶', author: 'æ¨ä¸‡é‡Œ', blankIndex: 4, correctAnswer: 'é»„', options: ['é»„', 'çš‡', 'æ¨ª', 'è´¯'] },
  { id: 86, poem: 'é£å…¥èœèŠ±æ— å¤„å¯»', author: 'æ¨ä¸‡é‡Œ', blankIndex: 4, correctAnswer: 'æ— ', options: ['æ— ', 'å¤©', 'å…ƒ', 'äº”'] },
  { id: 87, poem: 'æ³‰çœ¼æ— å£°æƒœç»†æµ', author: 'æ¨ä¸‡é‡Œ', blankIndex: 3, correctAnswer: 'å£°', options: ['å£°', 'ç”Ÿ', 'ç‰›', 'æ˜Ÿ'] },
  { id: 88, poem: 'æ ‘é˜´ç…§æ°´çˆ±æ™´æŸ”', author: 'æ¨ä¸‡é‡Œ', blankIndex: 4, correctAnswer: 'æ™´', options: ['æ™´', 'æ¸…', 'ç²¾', 'è¯·'] },
  { id: 89, poem: 'å°è·æ‰éœ²å°–å°–è§’', author: 'æ¨ä¸‡é‡Œ', blankIndex: 5, correctAnswer: 'å°–', options: ['å°–', 'å°¤', 'å°', 'å°‘'] },
  { id: 90, poem: 'æ—©æœ‰èœ»èœ“ç«‹ä¸Šå¤´', author: 'æ¨ä¸‡é‡Œ', blankIndex: 4, correctAnswer: 'ç«‹', options: ['ç«‹', 'ç«™', 'ä½', 'ç«–'] },
  { id: 91, poem: 'åº”æ€œå±é½¿å°è‹è‹”', author: 'å¶ç»ç¿', blankIndex: 4, correctAnswer: 'å°', options: ['å°', 'å¬', 'æŠ‘', 'å³'] },
  { id: 92, poem: 'å°æ‰£æŸ´æ‰‰ä¹…ä¸å¼€', author: 'å¶ç»ç¿', blankIndex: 4, correctAnswer: 'ä¹…', options: ['ä¹…', 'ä¹‹', 'æ¬ ', 'ç­'] },
  { id: 93, poem: 'æ˜¥è‰²æ»¡å›­å…³ä¸ä½', author: 'å¶ç»ç¿', blankIndex: 4, correctAnswer: 'å…³', options: ['å…³', 'å¤©', 'ä¸™', 'ç¾'] },
  { id: 94, poem: 'ä¸€æçº¢æå‡ºå¢™æ¥', author: 'å¶ç»ç¿', blankIndex: 4, correctAnswer: 'å‡º', options: ['å‡º', 'å±±', 'å‡»', 'å‡¸'] },
  { id: 95, poem: 'èƒœæ—¥å¯»èŠ³æ³—æ°´æ»¨', author: 'æœ±ç†¹', blankIndex: 4, correctAnswer: 'æ³—', options: ['æ³—', 'æ³—', 'å››', 'æ´’'] },
  { id: 96, poem: 'æ— è¾¹å…‰æ™¯ä¸€æ—¶æ–°', author: 'æœ±ç†¹', blankIndex: 4, correctAnswer: 'ä¸€', options: ['ä¸€', 'äºŒ', 'ä¸', 'å'] },
  { id: 97, poem: 'ç­‰é—²è¯†å¾—ä¸œé£é¢', author: 'æœ±ç†¹', blankIndex: 3, correctAnswer: 'å¾—', options: ['å¾—', 'å¾·', 'å¾…', 'è¡—'] },
  { id: 98, poem: 'ä¸‡ç´«åƒçº¢æ€»æ˜¯æ˜¥', author: 'æœ±ç†¹', blankIndex: 4, correctAnswer: 'æ€»', options: ['æ€»', 'æ¯', 'æ¿', 'å¿¿'] },
  { id: 99, poem: 'ç¢§ç‰å¦†æˆä¸€æ ‘é«˜', author: 'è´ºçŸ¥ç« ', blankIndex: 4, correctAnswer: 'ä¸€', options: ['ä¸€', 'äºŒ', 'ä¸', 'å¹²'] },
  { id: 100, poem: 'ä¸‡æ¡å‚ä¸‹ç»¿ä¸ç»¦', author: 'è´ºçŸ¥ç« ', blankIndex: 4, correctAnswer: 'ç»¿', options: ['ç»¿', 'å½•', 'æ¸Œ', 'ç¦„'] }
];

@Entry
@Component
struct InkWipePage {
  @State currentQuestion: InkQuestion | null = null;
  @State questionIndex: number = 0;
  @State score: number = 0;
  @State inkOpacity: number = 1.0;  // å¢¨æ±ä¸é€æ˜åº¦
  @State wipeProgress: number = 0;  // æ“¦é™¤è¿›åº¦ 0-100
  @State selectedAnswer: string = '';
  @State isAnswered: boolean = false;
  @State isCorrect: boolean = false;
  @State particles: InkParticle[] = [];  // å¢¨æ»´ç²’å­æ•°ç»„
  @State showParticles: boolean = false;
  @State gameStarted: boolean = false;
  
  private particleTimer: number = -1;
  private nextParticleId: number = 0;

  aboutToAppear(): void {
    this.loadQuestion();
  }

  aboutToDisappear(): void {
    if (this.particleTimer !== -1) {
      clearInterval(this.particleTimer);
    }
  }

  // åŠ è½½é¢˜ç›®
  private loadQuestion(): void {
    if (this.questionIndex < INK_QUESTIONS.length) {
      this.currentQuestion = INK_QUESTIONS[this.questionIndex];
      this.inkOpacity = 1.0;
      this.wipeProgress = 0;
      this.selectedAnswer = '';
      this.isAnswered = false;
      this.isCorrect = false;
      this.showParticles = false;
      this.particles = [];
      this.gameStarted = false;
    }
  }

  // å¤„ç†æ“¦é™¤æ‰‹åŠ¿
  private handleSwipe(offsetX: number, offsetY: number): void {
    if (this.isAnswered) return;
    
    this.gameStarted = true;
    
    // æ ¹æ®æ“¦é™¤åŠ¨ä½œå¢åŠ è¿›åº¦
    const swipeAmount = Math.abs(offsetX) + Math.abs(offsetY);
    const progressIncrement = swipeAmount / 2000;  // è°ƒæ•´çµæ•åº¦
    
    this.wipeProgress = Math.min(100, this.wipeProgress + progressIncrement);
    this.inkOpacity = Math.max(0, 1 - (this.wipeProgress / 100));
    
    // å½“æ“¦é™¤è¶…è¿‡40%æ—¶è§¦å‘ç²’å­ç‰¹æ•ˆ
    if (this.wipeProgress >= 20 && !this.showParticles) {
      this.showParticles = true;
      this.triggerParticleEffect();
    }
  }

  // è§¦å‘å¢¨æ»´ç²’å­ç‰¹æ•ˆ
  private triggerParticleEffect(): void {
    // ç”Ÿæˆå¤šä¸ªç²’å­
    for (let i = 0; i < 20; i++) {
      setTimeout(() => {
        this.createParticle();
      }, i * 50);
    }
    
    // å¯åŠ¨ç²’å­åŠ¨ç”»æ›´æ–°
    this.particleTimer = setInterval(() => {
      this.updateParticles();
    }, 30);
  }

  // åˆ›å»ºå•ä¸ªç²’å­
  private createParticle(): void {
    const particle: InkParticle = {
      id: this.nextParticleId++,
      x: Math.random() * 300 + 50,  // ç²’å­åˆå§‹xä½ç½®
      y: 100,  // ä»é¢˜ç›®åŒºåŸŸå¼€å§‹
      velocityX: (Math.random() - 0.5) * 4,  // éšæœºæ°´å¹³é€Ÿåº¦
      velocityY: Math.random() * 2 + 2,  // å‘ä¸‹é€Ÿåº¦
      opacity: 1.0,
      size: Math.random() * 8 + 4  // ç²’å­å¤§å°
    };
    this.particles.push(particle);
  }

  // æ›´æ–°ç²’å­ä½ç½®
  private updateParticles(): void {
    this.particles = this.particles.map((p: InkParticle): InkParticle => {
      const updatedParticle: InkParticle = {
        id: p.id,
        x: p.x + p.velocityX,
        y: p.y + p.velocityY,
        velocityX: p.velocityX,
        velocityY: p.velocityY + 0.2,  // é‡åŠ›åŠ é€Ÿåº¦
        opacity: p.opacity - 0.02,  // é€æ¸æ¶ˆå¤±
        size: p.size
      };
      return updatedParticle;
    }).filter((p: InkParticle) => p.opacity > 0 && p.y < 600);  // ç§»é™¤æ¶ˆå¤±çš„ç²’å­
    
    // æ‰€æœ‰ç²’å­æ¶ˆå¤±ååœæ­¢è®¡æ—¶å™¨
    if (this.particles.length === 0 && this.showParticles) {
      clearInterval(this.particleTimer);
      this.particleTimer = -1;
    }
  }

  // é€‰æ‹©ç­”æ¡ˆ
  private selectAnswer(answer: string): void {
    if (this.wipeProgress < 20) {
      promptAction.showToast({ message: 'ğŸ’§ è¯·å…ˆæ“¦é™¤å¢¨æ±ï¼ŒæŸ¥çœ‹å®Œæ•´è¯—å¥ï¼', duration: 2000 });
      return;
    }
    
    // å…è®¸ç»§ç»­é€‰æ‹©ï¼Œç›´åˆ°é€‰å¯¹ä¸ºæ­¢
    if (this.isCorrect) return;  // å·²ç»ç­”å¯¹äº†ï¼Œä¸å†å…è®¸é€‰æ‹©
    
    this.selectedAnswer = answer;
    this.isCorrect = (answer === this.currentQuestion!.correctAnswer);
    
    if (this.isCorrect) {
      this.isAnswered = true;
      this.score += 10;
      promptAction.showToast({ message: 'âœ… å›ç­”æ­£ç¡®ï¼+10åˆ†', duration: 1500 });
    } else {
      // é”™è¯¯æ—¶ä¸æ˜¾ç¤ºç­”æ¡ˆï¼Œå…è®¸ç»§ç»­é€‰æ‹©
      promptAction.showToast({ 
        message: 'âŒ ä¸å¯¹å“¦ï¼Œå†è¯•è¯•å…¶ä»–é€‰é¡¹ï¼', 
        duration: 1500 
      });
      // ç­‰å¾…ä¸€ä¸‹å†æ¸…ç©ºé€‰ä¸­çŠ¶æ€ï¼Œè®©ç”¨æˆ·çœ‹åˆ°é”™è¯¯åé¦ˆ
      setTimeout(() => {
        this.selectedAnswer = '';
      }, 300);
    }
  }

  // ä¸‹ä¸€é¢˜
  private nextQuestion(): void {
    this.questionIndex++;
    if (this.questionIndex < INK_QUESTIONS.length) {
      this.loadQuestion();
    } else {
      // æ¸¸æˆç»“æŸ
      promptAction.showDialog({
        title: 'ğŸ‰ æ¸¸æˆç»“æŸ',
        message: `æ­å–œå®Œæˆæ‰€æœ‰é¢˜ç›®ï¼\n\næ€»åˆ†ï¼š${this.score}/${INK_QUESTIONS.length * 10}`,
        buttons: [
          { text: 'è¿”å›', color: '#007DFF' },
          { text: 'é‡æ–°å¼€å§‹', color: '#FF6B00' }
        ]
      }).then((result) => {
        if (result.index === 0) {
          router.back();
        } else {
          this.questionIndex = 0;
          this.score = 0;
          this.loadQuestion();
        }
      });
    }
  }

  build() {
    Column() {
      // é¡¶éƒ¨å¯¼èˆªæ 
      Row() {
        Image($r('sys.symbol.chevron_left'))
          .width(24)
          .height(24)
          .fillColor($r('app.color.text_primary'))
          .onClick(() => router.back())
        
        Text('ğŸ–Œï¸ å¢¨æ±é®ç›–')
          .fontSize(20)
          .fontWeight(FontWeight.Bold)
          .fontColor($r('app.color.text_primary'))
          .layoutWeight(1)
          .textAlign(TextAlign.Center)
        
        Text(`${this.questionIndex + 1}/${INK_QUESTIONS.length}`)
          .fontSize(14)
          .fontColor($r('app.color.text_tertiary'))
          .padding({ right: 4 })
      }
      .width('100%')
      .height(56)
      .padding({ left: 16, right: 16 })
      .backgroundColor($r('app.color.card_background'))

      Scroll() {
        Column({ space: 20 }) {
          // åˆ†æ•°æ˜¾ç¤º
          Row() {
            Text(`ğŸ† å¾—åˆ†ï¼š${this.score}`)
              .fontSize(18)
              .fontWeight(FontWeight.Medium)
              .fontColor($r('app.color.text_primary'))
          }
          .width('100%')
          .justifyContent(FlexAlign.Center)
          .padding({ top: 16 })

          // å¢¨æ±é®ç›–åŒºåŸŸ
          if (this.currentQuestion) {
            Stack() {
              // è¯—å¥å†…å®¹ï¼ˆåº•å±‚ï¼‰
              Column() {
                Text(this.currentQuestion.author)
                  .fontSize(14)
                  .fontColor($r('app.color.text_secondary'))
                  .margin({ bottom: 8 })
                
                Text() {
                  ForEach(this.currentQuestion.poem.split(''), (char: string, index: number) => {
                    if (index === this.currentQuestion!.blankIndex) {
                      Span('___')
                        .fontSize(28)
                        .fontColor('#FF6B00')
                        .fontWeight(FontWeight.Bold)
                    } else {
                      Span(char)
                        .fontSize(28)
                        .fontColor($r('app.color.text_primary'))
                    }
                  })
                }
                .lineHeight(48)
                .textAlign(TextAlign.Center)
              }
              .width('100%')
              .padding(32)

              // å¢¨æ±å±‚ï¼ˆä¸Šå±‚ï¼‰
              Column() {
                Text('æ“¦é™¤å¢¨æ±')
                  .fontSize(20)
                  .fontColor('#FFFFFF')
                  .fontWeight(FontWeight.Bold)
                  .opacity(this.gameStarted ? 0 : 1)
                  .animation({ duration: 300 })
                
                // åªåœ¨æœªè¾¾åˆ°40%ä¸”æ¸¸æˆå·²å¼€å§‹æ—¶æ˜¾ç¤ºç™¾åˆ†æ¯”
                if (this.gameStarted && this.wipeProgress < 20) {
                  Text(`${Math.floor(this.wipeProgress)}%`)
                    .fontSize(32)
                    .fontColor('#FFFFFF')
                    .fontWeight(FontWeight.Bold)
                    .margin({ top: 8 })
                }
              }
              .width('100%')
              .height(200)
              .justifyContent(FlexAlign.Center)
              .backgroundColor('#2C2C2C')
              .opacity(this.inkOpacity)
              .gesture(
                SwipeGesture({ direction: SwipeDirection.All })
                  .onAction((event: GestureEvent) => {
                    if (event && event.offsetX !== undefined && event.offsetY !== undefined) {
                      this.handleSwipe(event.offsetX, event.offsetY);
                    }
                  })
              )
              .gesture(
                PanGesture()
                  .onActionUpdate((event: GestureEvent) => {
                    if (event && event.offsetX !== undefined && event.offsetY !== undefined) {
                      this.handleSwipe(event.offsetX, event.offsetY);
                    }
                  })
              )

              // å¢¨æ»´ç²’å­ç‰¹æ•ˆå±‚
              if (this.showParticles) {
                Stack() {
                  ForEach(this.particles, (particle: InkParticle) => {
                    Circle()
                      .width(particle.size)
                      .height(particle.size)
                      .fill('#2C2C2C')
                      .position({ x: particle.x, y: particle.y })
                      .opacity(particle.opacity)
                  })
                }
                .width('100%')
                .height(200)
              }
            }
            .width('100%')
            .borderRadius(16)
            .backgroundColor($r('app.color.card_background'))
            .clip(true)
          }

          // æ“¦é™¤è¿›åº¦æç¤º
          if (this.wipeProgress > 0 && this.wipeProgress < 20) {
            Row() {
              Text(`ğŸ’§ ç»§ç»­æ“¦é™¤ï¼Œè¿˜å·® ${20 - Math.floor(this.wipeProgress)}% è§£é”ç­”é¢˜`)
                .fontSize(14)
                .fontColor($r('app.color.text_secondary'))
            }
            .width('100%')
            .justifyContent(FlexAlign.Center)
          }

          // é€‰é¡¹åŒºåŸŸ
          if (this.currentQuestion && this.wipeProgress >= 20) {
            Column({ space: 12 }) {
              Text('âœ¨ è¯·é€‰æ‹©æ­£ç¡®çš„å­—ï¼š')
                .fontSize(16)
                .fontWeight(FontWeight.Medium)
                .fontColor($r('app.color.text_primary'))
                .width('100%')
                .textAlign(TextAlign.Start)
              
              Grid() {
                ForEach(this.currentQuestion.options, (option: string) => {
                  GridItem() {
                    Text(option)
                      .fontSize(32)
                      .fontWeight(FontWeight.Bold)
                      .fontColor(
                        this.isAnswered
                          ? (option === this.currentQuestion!.correctAnswer
                            ? '#FFFFFF'
                            : (option === this.selectedAnswer ? '#FFFFFF' : $r('app.color.text_primary')))
                          : (option === this.selectedAnswer ? '#FFFFFF' : $r('app.color.text_primary'))
                      )
                      .width('100%')
                      .height(80)
                      .textAlign(TextAlign.Center)
                      .backgroundColor(
                        this.isAnswered
                          ? (option === this.currentQuestion!.correctAnswer
                            ? '#4CAF50'
                            : (option === this.selectedAnswer ? '#F44336' : $r('app.color.card_background')))
                          : (option === this.selectedAnswer ? '#007DFF' : $r('app.color.card_background'))
                      )
                      .borderRadius(12)
                      .border({
                        width: 2,
                        color: option === this.selectedAnswer ? '#007DFF' : 'transparent'
                      })
                      .onClick(() => {
                        this.selectAnswer(option);
                      })
                  }
                })
              }
              .columnsTemplate('1fr 1fr')
              .rowsTemplate('1fr 1fr')
              .columnsGap(12)
              .rowsGap(12)
              .width('100%')
              .height(180)
            }
            .width('100%')
            .padding(16)
            .backgroundColor($r('app.color.card_background'))
            .borderRadius(16)
          }

          // ä¸‹ä¸€é¢˜æŒ‰é’®
          if (this.isAnswered) {
            Button('ä¸‹ä¸€é¢˜ â†’')
              .width('100%')
              .height(50)
              .fontSize(18)
              .fontWeight(FontWeight.Medium)
              .backgroundColor($r('app.color.accent_positive'))
              .onClick(() => {
                this.nextQuestion();
              })
          }
        }
        .width('100%')
        .padding({ left: 16, right: 16, bottom: 20 })
      }
      .layoutWeight(1)
      .edgeEffect(EdgeEffect.Spring)
    }
    .width('100%')
    .height('100%')
    .backgroundColor($r('app.color.page_background'))
  }
}
